{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>{% block title %} SUSHI NARUTO MOMOS AND MORE{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="{% static 'images/favicon.ico' %}">

    <!-- Open Graph -->
    <meta property="og:title" content=" SUSHI NARUTO MOMOS AND MORE - Allschwil's Best Sushi & Asian Cuisine">
    <meta property="og:description"
        content="Authentic sushi, Asian food, and takeaway in Allschwil, Switzerland. Reserve a table or order online!">
    <meta property="og:image" content="{% static 'images/restaurant_og.jpg' %}">
    <meta property="og:url" content="https://sushinaruto.ch">

    <!-- Custom Styles -->
    <style>
        /* Navigation underline animation */
        .nav-link {
            position: relative;
        }

        .nav-link::after {
            content: '';
            display: block;
            width: 0;
            height: 2px;
            background: #ef4444;
            transition: width .3s;
            position: absolute;
            left: 0;
            bottom: -2px;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        /* Buttons animation */
        .btn-anim {
            transition: background 0.2s, color 0.2s, transform 0.2s;
        }

        .btn-anim:hover {
            background: #f43f5e;
            color: #fff;
            transform: scale(1.05);
        }

        /* Modal fade */
        .modal-fade {
            transition: opacity 0.3s ease;
        }

        /* Gradient background */
        .gradient-bg {
            background: linear-gradient(135deg, #f43f5e 0%, #fbbf24 100%);
        }

        /* Fade-in animation */
        .fade-in {
            animation: fadeIn 1s ease forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Ensure restaurant hero image is always visible on mobile */
        @media (max-width: 640px) {
            .restaurant-hero-img {
                display: block !important;
                max-width: 90vw !important;
                margin-left: auto !important;
                margin-right: auto !important;
            }
            .reste {
                display: none !important;
            }
        }

        /* Responsive fixes */
        @media (max-width: 640px) {
            nav ul {
                flex-direction: column;
                gap: 0.5rem;
            }


            .md\:w-1\/2 {
                width: 100% !important;
            }

            .flex.md\:flex-row {
                flex-direction: column !important;
            }

            footer .grid {
                grid-template-columns: 1fr !important;
            }
        }

        @media (min-width: 641px) and (max-width: 1024px) {
            .md\:w-1\/2 {
                width: 100% !important;
            }

            footer .grid {
                grid-template-columns: repeat(2, 1fr) !important;
            }
        }

        @media (min-width: 1025px) and (max-width: 1440px) {
            footer .grid {
                grid-template-columns: repeat(3, 1fr) !important;
            }
        }

        @media (min-width: 1441px) {
            footer .grid {
                grid-template-columns: repeat(4, 1fr) !important;
            }
        }
    </style>
</head>

<body class="bg-white text-gray-800 font-sans leading-relaxed"
    x-data="{ open: false, userMenu: false, showLogin: false }">

    <!-- NAVIGATION -->
    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <!-- Logo -->
            <a href="{% url 'home' %}" class="flex items-center space-x-3 cursor-pointer">
                <img src="{% static 'images/logo.jpg' %}" alt=" SUSHI NARUTO MOMOS AND MORE Logo" class=" shadow 
            h-8 w-8 sm:h-10 sm:w-10 md:h-12 md:w-12 lg:h-14 lg:w-14 xl:h-16 xl:w-16">
                <span class="text-xl font-bold text-red-600 hover:text-red-800 transition"> SUSHI NARUTO MOMOS AND MORE</span>
            </a>

            <!-- Hamburger -->
            <button @click="open = !open"
                class="md:hidden flex items-center px-3 py-2 border rounded text-red-600 border-red-600 focus:outline-none">
                <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path :class="{'hidden': open, 'inline-flex': !open }" class="inline-flex" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                    <path :class="{'inline-flex': open, 'hidden': !open }" class="hidden" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>

            <!-- Links -->
            <ul class="flex space-x-6 text-gray-700 font-medium md:flex md:space-x-6 md:static absolute left-0 w-full md:w-auto bg-white md:bg-transparent top-full md:top-auto z-40 transition-all duration-300"
                :class="{ 'hidden': !open, 'flex flex-col space-x-0 space-y-2 p-4 shadow-lg': open, 'md:flex md:flex-row md:space-y-0 md:p-0 md:shadow-none': true }">
                <li><a href="{% url 'home' %}" class="nav-link">Home</a></li>
                <li><a href="{% url 'menu' %}" class="nav-link">Menu</a></li>
                <li><a href="{% url 'reservation' %}" class="nav-link">Reservation</a></li>
                <!-- <li><a href="{% url 'order_menu' %}" class="nav-link">Order Ahead</a></li> -->
                <li><a href="{% url 'contact' %}" class="nav-link">Contact</a></li>

                {% if user.is_authenticated %}
                <li class="relative">
                    <button @click="userMenu = !userMenu" class="flex items-center space-x-2 focus:outline-none">
                        <svg class="w-7 h-7 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2" fill="none" />
                            <path stroke="currentColor" stroke-width="2" d="M4 20c0-4 4-7 8-7s8 3 8 7" />
                        </svg>
                        <span class="font-semibold text-gray-700">{{ user.username }}</span>
                    </button>
                    <div x-show="userMenu" @click.away="userMenu = false"
                        class="absolute right-0 mt-2 w-56 bg-white border rounded shadow-lg z-50 py-2">
                        <div class="px-4 py-2 text-sm text-gray-700 border-b">
                            <div><b>User:</b> {{ user.username }}</div>
                            <div><b>Email:</b> {{ user.email }}</div>
                        </div>
                        <a href="{% url 'order_card_list' %}" class="block px-4 py-2 hover:bg-gray-100">My Orders</a>
                        <form method="post" action="{% url 'logout' %}" class="mt-2">
                            {% csrf_token %}
                            <button type="submit"
                                class="w-full text-left px-4 py-2 text-red-600 hover:bg-gray-100">Logout</button>
                        </form>
                    </div>
                </li>
                {% else %}
                <li>
                    <a href="{% url 'login' %}"
                        class="btn-anim gradient-bg px-4 py-2 rounded text-white font-semibold flex items-center space-x-1">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2" fill="none" />
                            <path stroke="currentColor" stroke-width="2" d="M4 20c0-4 4-7 8-7s8 3 8 7" />
                        </svg>
                        <span>Login / Sign Up</span>
                    </a>
                </li>
                {% endif %}
            </ul>
        </div>
    </nav>

    <!-- HERO -->
    
    <!-- PAGE CONTENT -->
    <main class="container mx-auto px-4 py-8">
        {% block content %}{% endblock %}
    </main>

    <!-- FOOTER -->
    <footer class="bg-gray-100 text-sm text-gray-600 py-8 mt-12">
        <div class="container mx-auto px-4 grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
                <h4 class="font-semibold text-gray-800 mb-2">Legal</h4>
                <ul class="space-y-1">
                    <li><a href="#" class="hover:text-red-600 transition">Privacy Policy</a></li>
                    <li><a href="#" class="hover:text-red-600 transition">Terms of Service</a></li>
                    <li><a href="#" class="hover:text-red-600 transition">Cookie Policy Changes</a></li>
                </ul>
            </div>
            <div>
                <h4 class="font-semibold text-gray-800 mb-2">Contact</h4>
                <p>Binningerstrasse 6, 4123 Allschwil</p>
                <p>Phone: 0615064123; 0774929026</p>
                <p>Email: info.sushinaruto@gmail.com</p>
                <h5 class="font-semibold text-gray-700 mt-3">Opening Hours</h5>
                <p>Tue-Fri: 11:00–14:00 & 17:00–22:30</p>
                <p>Sat-Sun: 17:00–22:00</p>
                <p>Mon: Closed</p>
            </div>
            <div>
                <h4 class="font-semibold text-gray-800 mb-2">Links</h4>
                <ul class="space-y-1">
                    <li><a href="{% url 'menu' %}" class="hover:text-red-600 transition">Menu</a></li>
                    <li><a href="{% url 'reservation' %}" class="hover:text-red-600 transition">Reservation</a></li>
                    <!-- <li><a href="{% url 'order_menu' %}" class="hover:text-red-600 transition">Order Ahead</a></li> -->
                    <li><a href="{% url 'contact' %}" class="hover:text-red-600 transition">Contact Us</a></li>
                </ul>
            </div>
            <div>
                <h4 class="font-semibold text-gray-800 mb-2">Follow Us</h4>
                <ul class="space-y-1">
                    <li><a href="https://www.instagram.com/sushinaruto" target="_blank"
                            class="hover:text-red-600 transition">Instagram</a></li>
                    <li><a href="https://www.facebook.com/sushinaruto" target="_blank"
                            class="hover:text-red-600 transition">Facebook</a></li>
                </ul>
            </div>

            <div class="mt-6 border-t pt-4 text-center text-xs md:col-span-4">
                <p>Copyrights © 2025 All Rights Reserved by SUSHI NARUTO MOMOS AND
          MORE</p>
            </div>
        </div>
    </footer>

    <!-- Cart Management -->
    <script>
        // Initialize global cart from localStorage or as an empty array
        window.globalCart = JSON.parse(localStorage.getItem('sushiNarutoCart')) || [];

        // Function to update and save the cart
        function updateCart() {
            localStorage.setItem('sushiNarutoCart', JSON.stringify(window.globalCart));
            window.dispatchEvent(new CustomEvent('cart-updated'));
        }

        // Function to add to cart and redirect
        function addToCartAndGoToCart(id, name, price) {
            const itemId = parseInt(id);
            const existingItem = window.globalCart.find(item => item.id === itemId);

            if (existingItem) {
                existingItem.qty += 1;
            } else {
                window.globalCart.push({ id: itemId, name: name, price: parseFloat(price), qty: 1 });
            }
            updateCart();
            window.location.href = "{% url 'cart' %}";
        }

        // Clear cart from local storage (for debugging or other purposes)
        function clearCart() {
            window.globalCart = [];
            updateCart();
        }
    </script>

    <!-- Alpine.js -->
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</body>

</html>